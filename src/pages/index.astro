---
import { getCollection } from 'astro:content';
import HomeLayout from '../layouts/HomeLayout.astro';
import Hero from '../components/ui/Hero.astro';
import Button from '../components/ui/Button.astro';
import ArticlesList from '../components/ArticlesList.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';

const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);

const recentPosts = posts.slice(0, 3);
---

<HomeLayout title={SITE_TITLE} description={SITE_DESCRIPTION}>
  <Hero
    title="Patrick Robinson"
    subtitle="Web Developer & Engineer"
    description="Building modern web applications with a focus on performance, accessibility, and user experience. Passionate about clean code and innovative solutions."
    primaryCTA={{
      text: "View My Work",
      href: "/projects"
    }}
    secondaryCTA={{
      text: "Read My Blog",
      href: "/blog"
    }}
    size="xl"
  />

  <section class="section bg-white">
    <div class="container mx-auto px-4">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div class="feature-card text-center p-6">
          <div class="feature-icon mx-auto mb-4 w-16 h-16 bg-gradient rounded-lg flex items-center justify-center">
            <svg viewBox="0 0 24 24" class="w-8 h-8 text-white" fill="currentColor">
              <path d="M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67zM11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8z"/>
            </svg>
          </div>
          <h3 class="text-xl font-semibold text-gray-900 mb-2">Performance First</h3>
          <p class="text-gray-600">Optimized applications that load fast and run smoothly across all devices and networks.</p>
        </div>

        <div class="feature-card text-center p-6">
          <div class="feature-icon mx-auto mb-4 w-16 h-16 bg-gradient rounded-lg flex items-center justify-center">
            <svg viewBox="0 0 24 24" class="w-8 h-8 text-white" fill="currentColor">
              <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/>
            </svg>
          </div>
          <h3 class="text-xl font-semibold text-gray-900 mb-2">Accessible Design</h3>
          <p class="text-gray-600">Inclusive interfaces that work for everyone, following WCAG guidelines and best practices.</p>
        </div>

        <div class="feature-card text-center p-6">
          <div class="feature-icon mx-auto mb-4 w-16 h-16 bg-gradient rounded-lg flex items-center justify-center">
            <svg viewBox="0 0 24 24" class="w-8 h-8 text-white" fill="currentColor">
              <path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0L19.2 12l-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
            </svg>
          </div>
          <h3 class="text-xl font-semibold text-gray-900 mb-2">Clean Code</h3>
          <p class="text-gray-600">Maintainable, well-documented code that follows industry standards and best practices.</p>
        </div>
      </div>
    </div>
  </section>

  <section class="section bg-secondary">
    <div class="container mx-auto px-4">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-gray-900 mb-4">Latest Articles</h2>
        <p class="text-lg text-gray-600 max-w-2xl mx-auto">
          Thoughts on web development, technology trends, and lessons learned from building modern applications.
        </p>
      </div>

      <ArticlesList articles={recentPosts} />

      <div class="text-center mt-12">
        <Button href="/blog" variant="secondary" size="lg">
          View All Articles
        </Button>
      </div>
    </div>
  </section>
</HomeLayout>

<style>
  .feature-card:hover .feature-icon {
    transform: translateY(-2px);
    transition: transform 0.2s ease-in-out;
  }

  .text-gray-900 {
    color: var(--color-text-primary);
  }

  .text-gray-600 {
    color: var(--color-text-secondary);
  }

  .bg-gradient {
    background: var(--gradient-primary);
  }
</style>
