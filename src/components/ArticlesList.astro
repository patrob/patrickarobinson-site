---
import Card from './ui/Card.astro';
import type { CollectionEntry } from 'astro:content';

export interface Props {
  articles: CollectionEntry<'blog'>[];
  showExcerpts?: boolean;
  columns?: 1 | 2 | 3 | 4;
  class?: string;
}

const {
  articles = [],
  showExcerpts = true,
  columns = 3,
  class: className = '',
  ...attrs
} = Astro.props;

const gridClasses = {
  1: 'grid-cols-1',
  2: 'grid-cols-1 md:grid-cols-2',
  3: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3',
  4: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4'
};
---

<section
  class:list={[
    'articles-list',
    className
  ]}
  {...attrs}
>
  {articles.length > 0 ? (
    <div class:list={[
      'articles-grid grid gap-6',
      gridClasses[columns]
    ]}>
      {articles.map((article) => (
        <Card
          title={article.data.title}
          excerpt={showExcerpts ? article.data.description : undefined}
          date={article.data.pubDate}
          image={article.data.heroImage?.src}
          imageAlt={`Cover image for ${article.data.title}`}
          href={`/blog/${article.id}/`}
          aria-label={`Read article: ${article.data.title}`}
        />
      ))}
    </div>
  ) : (
    <div class="articles-empty text-center py-16">
      <h3 class="text-xl font-semibold text-gray-900 mb-2">No articles found</h3>
      <p class="text-gray-600">Check back soon for new content!</p>
    </div>
  )}
</section>

<style>
  .text-gray-900 {
    color: var(--color-text-primary);
  }

  .text-gray-600 {
    color: var(--color-text-secondary);
  }
</style>